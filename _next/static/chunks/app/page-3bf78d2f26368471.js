(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{8088:(e,a,t)=>{Promise.resolve().then(t.bind(t,6234)),Promise.resolve().then(t.t.bind(t,8072,23))},6234:(e,a,t)=>{"use strict";t.d(a,{default:()=>eU});var n=t(1047),c=t(390),s=t.n(c),l=t(6847),i=t(5792),r=t.n(i),o=function(e){return e[e.Home=0]="Home",e[e.Start=1]="Start",e[e.Message=2]="Message",e[e.Show=3]="Show",e[e.Result=4]="Result",e[e.None=5]="None",e}({}),d=t(1233),_=t(5576);let u=(0,d.v)((0,_.kg)({status:o.Home},e=>({setStatus:a=>e({status:a}),resetStatus:()=>e({status:o.None})}))),m=(0,d.v)((0,_.kg)({bgmControl:{}},e=>({setBgmControl:a=>e({bgmControl:a})}))),h=(0,d.v)((0,_.kg)({state:{totalPity:0,elitePity:0,guaranteePickup:!1}},e=>({setState:a=>e({state:a}),resetState:()=>e({state:{totalPity:0,elitePity:0,guaranteePickup:!1}})}))),p=(0,d.v)((0,_.kg)({totalResult:[],currentResult:[]},e=>({setResult:a=>e(e=>{let{totalResult:t}=e;return{currentResult:a,totalResult:[...t,...a]}}),resetResult:()=>e({totalResult:[],currentResult:[]})}))),g=(0,d.v)((0,_.kg)({audioListMap:{}},e=>({setAudioListMap:a=>e({audioListMap:a}),reset:()=>e({audioListMap:{}})}))),v=(0,d.v)((0,_.kg)({audioMute:!0},e=>({setAudioMute:a=>e({audioMute:a}),reset:()=>e({audioMute:!0})})));function x(){if(!window)return Math.random();let e=new Uint32Array(1);return window.crypto.getRandomValues(e),e[0]/0x100000000}function j(e){if(0===e.length)throw Error("Empty array provided to selectRandom");if(1===e.length)return e[0];let a=Math.floor(x()*e.length);return e[a]}var f=function(e){return e.EliteDoll="EliteDoll",e.StandardDoll="StandardDoll",e.StandardWeapon="StandardWeapon",e.OldWeapon="OldWeapon",e}({});function N(e,a){var t;let n={...e};n.totalPity=e.totalPity+1;let c=n.totalPity%10==0,s=(t=n.elitePity)<58?.6:t>=79?100:.6+4.7828*(t-58),l=100*x();if(l<s){let e;e=!!n.guaranteePickup||.5>x(),n.elitePity=0,n.guaranteePickup=!e;let t=e&&a.elitePickup.length>0?j(a.elitePickup):j(a.elite);return{result:{type:"EliteDoll",isPickup:e,item:t},newState:n}}if(!(l<(c?100:6)))return n.elitePity+=1,{result:{type:"OldWeapon",item:j(a.oldWeapon)},newState:n};if(n.elitePity+=1,!(.5>x()))return{result:{type:"StandardWeapon",item:j(a.standardWeapon)},newState:n};{let e=.5>x(),t=e&&a.standardDollTarget.length?j(a.standardDollTarget):j(a.standardDoll);return{result:{type:"StandardDoll",isTarget:e,item:t},newState:n}}}let y={Clukay:"클루카이",Mishty:"미슈티"},G={...y,Mosinnagant:"모신나강",Peritya:"페리티아",Qiongjiu:"경구",Sabrina:"사브리나",Tololo:"토로로",Vepley:"베프리"},b={Qiongjiu:"이렇게 또 손을 잡게 되어 정말 기쁘오. 귀공의 아름다운 보옥이 될 수 있도록 분골쇄신하겠소.",Mosinnagant:"치안 업무용 인형 모신나강입니다... 어? 지휘관 동지잖아! 오랜만이야! 잘 지냈어?",Tololo:"인력에 끌려 별의 궤적이 바뀌듯 우리도 서로를 끌어당겼군요. 토로로, 전입을 신고합니다.",Sabrina:"짜안, 오늘은 엘모호 맛집 탐방 컨텐츠  진행할게! 저기... 내 방송 나오면 광고 효과도 있는데 이거 무료로 주면 안 될까?",Peritya:"당신의 호출, 확실하게 들었습니다.",Vepley:"드디어 내 차례구나! 베프리, 준비 OK! 카메라는 어딨어? 언제든지 시작해도 돼☆",Clukay:"H.I.D.E 404, 현역 대장, 엘리트 인형 클루카이. 오랜만이에요, 지휘관.",Mishty:"네, 네, 성격 좋고 다루기 쉬운 미슈티, 여기 왔습니다... 지휘관, 제 짐은 이미 미리 도착해 있겠죠?"},k={...G,Charolic:"캐롤릭",Cheeta:"치타",Colphne:"콜펜",Groza:"그로자",Ksenia:"크세니아",Littara:"리타라",Nagant:"나강리볼버",Nemesis:"네메시스",Sharkry:"샤크리"},w={Clukay:"센티널",Mosinnagant:"센티널",Peritya:"센티널",Qiongjiu:"센티널",Sabrina:"불워크",Tololo:"센티널",Vepley:"뱅가드",Charolic:"뱅가드",Cheeta:"서포트",Colphne:"서포트",Groza:"불워크",Ksenia:"서포트",Littara:"센티널",Nagant:"서포트",Nemesis:"센티널",Sharkry:"센티널",Mishty:"서포트"},S={Clukay:{year:2025,month:4,day:9},Mishty:{year:2025,month:4,day:30}},M=s().bind(r()),P=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,t=[];for(let n=0;n<e.length;n+=a)t.push(e.slice(n,n+a));return t},R=e=>e.length>2?P(e,2).map((e,a)=>(0,n.jsx)("div",{className:M("row-group"),children:e.map((e,a)=>{let[t,c]=e;return(0,n.jsxs)("div",{className:M("card-content"),children:[(0,n.jsxs)("div",{className:M("card-count"),children:["+",c]}),(0,n.jsx)("div",{className:M("card-job")}),(0,n.jsx)("div",{className:M("card-name"),children:k[t]}),(0,n.jsx)("img",{className:M("card-image"),src:"/gf2/avatar/bust/Avatar_Bust_".concat(t,".png")})]},a)})},a)):(0,n.jsx)(n.Fragment,{children:e.map((e,a)=>{let[t,c]=e;return(0,n.jsxs)("div",{className:M("card-content"),children:[(0,n.jsxs)("div",{className:M("card-count"),children:["+",c]}),(0,n.jsx)("div",{className:M("card-job")}),(0,n.jsx)("div",{className:M("card-name"),children:k[t]}),(0,n.jsx)("img",{className:M("card-image"),src:"/gf2/avatar/bust/Avatar_Bust_".concat(t,".png")})]},"".concat(t,"_").concat(a))})}),A=e=>e.length>2?P(e,2).map((e,a)=>(0,n.jsx)("div",{className:M("row-group"),children:e.map((e,a)=>{let[t,c]=e;return(0,n.jsxs)("div",{className:M(["card-content","weapon"]),children:[(0,n.jsxs)("div",{className:M("card-count"),children:["+",c]}),(0,n.jsx)("div",{className:M("card-job")}),(0,n.jsx)("div",{className:M("card-name"),children:t}),(0,n.jsx)("img",{className:M("card-image"),src:"/gf2/weapon/normal/".concat(t,".png")})]},a)})},a)):(0,n.jsx)(n.Fragment,{children:e.map((e,a)=>{let[t,c]=e;return(0,n.jsxs)("div",{className:M(["card-content","weapon"]),children:[(0,n.jsxs)("div",{className:M("card-count"),children:["+",c]}),(0,n.jsx)("div",{className:M("card-job")}),(0,n.jsxs)("div",{className:M("card-name"),children:["구형 ",t]}),(0,n.jsx)("img",{className:M("card-image"),src:"/gf2/weapon/old/".concat(t,".png")})]},"".concat(t,"_").concat(a))})}),C={[f.EliteDoll]:{},[f.StandardDoll]:{},[f.StandardWeapon]:{},[f.OldWeapon]:{}},I=e=>{let{pickUpName:a}=e,{status:t}=u(),{totalResult:c}=p(),[s,i]=(0,l.useState)(0),[r,d]=(0,l.useState)(C);(0,l.useEffect)(()=>{let e={...C};t===o.Result&&(c.forEach(a=>{var t;(null==e?void 0:null===(t=e[a.type])||void 0===t?void 0:t[a.item])?e[a.type][a.item]+=1:e[a.type]={...e[a.type],[a.item]:1}}),d(e),i(c.length))},[t]),(0,l.useEffect)(()=>{d(C)},[a]);let{EliteDoll:_,StandardDoll:m,StandardWeapon:h,OldWeapon:g}=(0,l.useMemo)(()=>{let e=(e,a)=>a[1]-e[1];return{EliteDoll:Object.entries(r[f.EliteDoll]).sort(e),StandardDoll:Object.entries(r[f.StandardDoll]).sort(e),StandardWeapon:Object.entries(r[f.StandardWeapon]).sort(e),OldWeapon:Object.entries(r[f.OldWeapon]).sort(e)}},[r]);return Object.values(r).every(e=>0===Object.keys(e).length)?(0,n.jsxs)("div",{className:M("rules-panel"),children:[(0,n.jsx)("div",{className:M("header"),children:(0,n.jsx)("span",{className:M("header-title"),children:"액세스 결과"})}),(0,n.jsx)("div",{className:M("main-container"),children:(0,n.jsx)("div",{className:M("no-data"),children:"액세스 기록 없음"})})]}):(0,n.jsxs)("div",{className:M("rules-panel"),children:[(0,n.jsx)("div",{className:M("header"),children:(0,n.jsxs)("span",{className:M("header-title"),children:["액세스 결과 (",s,")"]})}),(0,n.jsx)("div",{className:M("main-container"),children:(0,n.jsxs)("div",{className:M("content"),children:[_.length>0&&(0,n.jsxs)("div",{className:M(["card-container","golden"]),children:[(0,n.jsxs)("div",{className:M("card-title"),children:[(0,n.jsx)("span",{className:M("card-deco")}),"정예 인형"]}),(0,n.jsx)("div",{className:M("card-list"),children:R(_)})]}),m.length>0&&(0,n.jsxs)("div",{className:M(["card-container","purple"]),children:[(0,n.jsxs)("div",{className:M("card-title"),children:[(0,n.jsx)("span",{className:M("card-deco")}),"표준 인형"]}),(0,n.jsx)("div",{className:M("card-list"),children:R(m)})]}),h.length>0&&(0,n.jsxs)("div",{className:M(["card-container","purple"]),children:[(0,n.jsxs)("div",{className:M("card-title"),children:[(0,n.jsx)("span",{className:M("card-deco")}),"표준 무기"]}),(0,n.jsx)("div",{className:M("card-list"),children:A(h)})]}),g.length>0&&(0,n.jsxs)("div",{className:M(["card-container","blue"]),children:[(0,n.jsxs)("div",{className:M("card-title"),children:[(0,n.jsx)("span",{className:M("card-deco")}),"구형 무기"]}),(0,n.jsx)("div",{className:M("card-list"),children:A(g)})]})]})})]})};var H=t(4081),E=t.n(H),D=t(6371),U=t.n(D);let W=s().bind(U()),T=()=>{let e=20+75*Math.random();return .5>Math.random()?-e:e},O=()=>.3*Math.random(),V=()=>{let e=T();return{offset:e,style:{"--glitch-offset":"".concat(e,"px"),animationDelay:"".concat(O(),"s")}}},L=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return Array.from({length:Math.min(a,e.length)},()=>e[Math.floor(Math.random()*e.length)]).join("")},B=e=>{let{baseChar:a,message:t}=e,c=e=>e>0?"left":"right";return(0,n.jsx)("div",{className:W("glitch-container"),children:["top","middle","bottom"].map(e=>{let s=V();return(0,n.jsxs)("span",{className:W(["glitch-slice","slice-".concat(e)]),style:s.style,children:[a,(0,n.jsx)("div",{className:W(["".concat(c(s.offset)),"glitch-slice-small"]),children:(0,n.jsx)("span",{className:W("glitch-slice-message"),children:L(t)})})]},"".concat(e,"_").concat(a))})})},F=e=>{let{name:a,message:t}=e;return(0,n.jsx)(n.Fragment,{children:Array.from(a,(e,a)=>(0,n.jsx)(B,{baseChar:e,message:t},"".concat(e,"_").concat(a)))})};var z=t(8396),Z=t(1417),Q=t(6891),q=t.n(Q);function J(e){let{onClickSkip:a}=e;return(0,n.jsxs)("button",{className:"skip-container",onClick:()=>{a()},children:[(0,n.jsxs)("div",{className:"skip-icon",children:[(0,n.jsx)("div",{className:"triangle"}),(0,n.jsx)("div",{className:"bar"})]}),(0,n.jsx)("div",{className:"skip-message",children:"연출 스킵"})]})}let X=s().bind(q());function Y(e){let{publicId:a,muted:t,loop:c=!1,autoPlay:s=!0,onClick:l=()=>{},ref:i,style:r,onEnded:o,isShowSkipButton:d=!1,className:_}=e,{audioMute:u}=v();return(0,n.jsxs)("div",{className:X("cloudinary_wrapper"),style:r,onClick:l,children:[d&&(0,n.jsx)(J,{onClickSkip:()=>{l()}}),(0,n.jsx)("video",{className:X("cloudinary_video",_),src:"https://res.cloudinary.com/dkrgsomsq/video/upload/q_auto/f_auto:video/".concat(a),onEnded:o,autoPlay:s,ref:i,loop:c,muted:null!=t?t:u,playsInline:!0,preload:"auto"})]})}var K=t(3372),$=t.n(K);let ee=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{audioListMap:t}=g(),n=(0,l.useMemo)(()=>t[e]||null,[e,t]),[c,s]=(0,l.useState)(!1),{audioMute:i}=v();(0,l.useEffect)(()=>{if(!n)return;let e=()=>{s(!0)};return n.addEventListener("ended",e),()=>{n.removeEventListener("ended",e)}},[n]);let r=(0,l.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!n){console.log("audio is not loaded"),s(!0);return}(null==n||!n.currentTime||n.paused||e)&&(s(!1),n.volume=(null==a?void 0:a.volume)||.5,n.currentTime=0,n.loop=a.loop||!1,n.play())},[n,a.loop,null==a?void 0:a.volume,i]);(0,l.useEffect)(()=>{n&&(n.muted=i)},[i,n]);let o=(0,l.useCallback)(()=>{n&&n.pause()},[n]),d=(0,l.useCallback)(()=>{n&&(n.currentTime=0,n.loop=!1,n.pause()),s(!0)},[n]);return(0,l.useMemo)(()=>({sound:n,play:r,pause:o,end:d,isEnded:c&&(null==n?void 0:n.src.includes(e))}),[r,o,d,c,n,e])},ea=s().bind($()),et=Object.keys(y),en=e=>{let{pickUpName:a,setPickUpName:t}=e,{bgmControl:c}=m(),{resetStatus:s}=u(),{resetState:l}=h(),{resetResult:i}=p(),{play:r}=ee("UI_System_Main_Click_Normal.wav");return et.map(e=>(0,n.jsx)("div",{className:ea("gatcha-banner",{selected:e===a}),onClick:()=>{e!==a&&(r(!0),c.end(),i(),l(),s(),t(e))},children:(0,n.jsx)("img",{className:ea("gatcha-banner-image"),src:"/gf2/banner/Img_GashaponMainTab_Chr_".concat(e,".png")})},e))},ec=s().bind(E()),es=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return{elitePickup:[e],elite:["Mosinnagant","Peritya","Qiongjiu","Sabrina","Tololo","Vepley"],standardDollTarget:[],standardDoll:["Charolic","Cheeta","Colphne","Groza","Ksenia","Littara","Nagant","Nemesis","Sharkry"],standardWeapon:[...a,"380Curva","나강 M1895","람누시아","로빈슨","모델 알파","모델 ARM","산토끼","스테츠킨","페체네그","M1891","MP7H1","OTs-14","QBZ-191","SPSG-12","Vepr-12"],oldWeapon:[...a,"380Curva","나강 M1895","람누시아","로빈슨","모델 알파","모델 ARM","산토끼","스테츠킨","페체네그","M1891","MP7H1","OTs-14","QBZ-191","SPSG-12","Vepr-12"]}},el=e=>{let{pickUpName:a="Clukay",setPickUpName:t}=e,{setStatus:c}=u(),{state:s,setState:i}=h(),{setResult:r,totalResult:d}=p(),[_,m]=(0,l.useState)({day:0,hour:0,isRemain:!1}),[g,v]=(0,l.useState)(!1),{play:x}=ee("UI_System_Main_Click_Normal.wav");(0,l.useEffect)(()=>{v(!0)},[]);let{year:j,month:y=12,day:G=12}=S[a];!function(e,a){let{year:t=2025,month:n,day:c,hour:s=23}=e,i=(0,l.useRef)(null);(0,l.useEffect)(()=>{let e=()=>{let l=new Date,r=new Date(t,n-1,c,s,0,0);if((0,z.R)(r)){a({day:0,hour:0,isRemain:!1});return}let o=(0,Z.o)(r,l);a({day:Math.floor(o/1440),hour:Math.floor(o%1440/60),isRemain:!0});let d=0;if(o>60){let e=Math.floor(o/60),a=(o-60*e)*6e4;d=a>0?a:36e5}else{let e=10*Math.floor(o/10),a=(o-e)*6e4;d=a>0?a:6e4}i.current=setTimeout(e,d)};return e(),()=>{i.current&&clearTimeout(i.current)}},[])}({year:j,month:y,day:G,hour:19},m);let b=9999-d.length,M=_.isRemain?"지정발주 ".concat(_.day,"일 ").concat(_.hour,"시간 후 종료"):"지정발주 종료됨",P="회 이내에 반드시 정예 액세스 대상 획득",R=es(a);return g?(0,n.jsxs)("div",{className:E()["home-container"],children:[(0,n.jsxs)("div",{className:E()["remain-ticket"],children:[(0,n.jsx)("img",{className:E()["remain-ticket-image"],src:"/gf2/icon/ticket.png",alt:"Ticket Icon",width:"30"}),(0,n.jsx)("span",{className:ec("remain-ticket-count"),children:b})]}),(0,n.jsx)("div",{className:ec("pickup-list"),children:(0,n.jsx)(en,{pickUpName:a,setPickUpName:t})}),(0,n.jsxs)("div",{className:ec("pickup-info"),children:[(0,n.jsxs)("div",{className:ec("job-panel"),children:[(0,n.jsx)("img",{className:ec("job-image"),src:"/gf2/icon/".concat(w[a],".png"),width:"15px"}),(0,n.jsx)("span",{className:ec("job-name"),children:w[a]})]}),(0,n.jsx)("div",{className:ec("animation-wrapper"),children:(0,n.jsx)(F,{message:[M,P].join(),name:k[a]})}),(0,n.jsx)("div",{className:ec("pickup-date"),children:(0,n.jsx)("span",{className:ec("pickup-date-text"),children:M})}),(0,n.jsxs)("div",{className:ec("pickup-count"),children:[(0,n.jsx)("span",{className:ec("pickup-count-text"),children:80-s.elitePity}),P]})]}),(0,n.jsx)(Y,{className:ec("container"),publicId:"Gacha_BackGround_".concat(a),muted:!0,loop:!0,"webkit-playsinline":"true"}),(0,n.jsxs)("div",{className:E().button_container,children:[(0,n.jsxs)("div",{className:E().button_box,children:[(0,n.jsxs)("div",{className:E()["ticket-container"],children:[(0,n.jsx)("img",{className:E()["ticket-image"],src:"/gf2/icon/ticket.png",alt:"Ticket Icon",width:"20"}),(0,n.jsxs)("span",{className:E()["ticket-text"],children:[(0,n.jsx)("span",{className:E()["ticket-text-parts"],children:"\xd7"}),(0,n.jsx)("span",{className:E()["ticket-text-parts"],children:"1"})]})]}),(0,n.jsx)("button",{className:ec(["button","one_access"]),onClick:()=>{let{result:e,newState:a}=N(s,R);x(!0),i(a),r([e]),c(o.Start)},children:"1회 액세스"})]}),(0,n.jsxs)("div",{className:E().button_box,children:[(0,n.jsxs)("div",{className:E()["ticket-container"],children:[(0,n.jsx)("img",{className:E()["ticket-image"],src:"/gf2/icon/ticket.png",alt:"Ticket Icon",width:"20"}),(0,n.jsxs)("span",{className:E()["ticket-text"],children:[(0,n.jsx)("span",{className:E()["ticket-text-parts"],children:"\xd7"}),(0,n.jsx)("span",{className:E()["ticket-text-parts"],children:"10"})]})]}),(0,n.jsx)("button",{className:ec(["button","ten_access"]),onClick:()=>{x(!0);let e=s,a=[];for(let t=0;t<10;t++){let{result:t,newState:n}=N(e,R);a.push(t),e=n}i(e),r(function(e){let a=e.reduce((e,a,t)=>(a.type!==f.EliteDoll&&e.push(t),e),[]),t=a.map(a=>e[a]);for(let e=t.length-1;e>0;e--){let a=Math.floor(Math.random()*(e+1));[t[e],t[a]]=[t[a],t[e]]}let n=[...e];return a.forEach((e,a)=>{n[e]=t[a]}),n}(a)),c(o.Start)},children:"10회 액세스"})]})]})]}):null};var ei=t(6455),er=t.n(ei);let eo=s().bind(er()),ed={[f.EliteDoll]:"golden",[f.StandardDoll]:"purple",[f.StandardWeapon]:"purple",[f.OldWeapon]:"blue"};function e_(){let{currentResult:e}=p(),{setStatus:a}=u(),{bgmControl:t}=m(),{play:c}=ee("UI_Gacha_Show_Result_R.wav",{loop:!1,volume:1}),{play:s}=ee("UI_Gacha_Show_Result_SR.wav",{loop:!1,volume:1}),{play:l}=ee("UI_Gacha_Show_Result_SSR.wav",{loop:!1,volume:1}),i={[f.EliteDoll]:l,[f.StandardDoll]:s,[f.StandardWeapon]:s,[f.OldWeapon]:c};return(0,n.jsxs)("div",{className:eo("gatcha-result"),children:[(0,n.jsx)("div",{className:eo("x-icon-container"),children:(0,n.jsx)("button",{className:eo("x-icon"),onClick:()=>{a(o.Home),t.end()}})}),(0,n.jsx)("div",{className:eo("column-container"),children:e.map((e,a)=>{let{type:t,item:c}=e,s="".concat(.5+.2*a,"s");return(0,n.jsxs)("div",{className:eo(["column",ed[t]]),style:{animationDelay:s},onAnimationEnd:()=>{var e;return null===(e=i[t])||void 0===e?void 0:e.call(i,!0)},children:[(0,n.jsx)("div",{className:eo("avatar-container"),children:[f.StandardWeapon,f.OldWeapon].includes(t)?(0,n.jsx)("img",{className:eo("weapon"),src:"/gf2/weapon/".concat(f.StandardWeapon===t?"normal":"old","/").concat(c,".png"),alt:"weapon"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("img",{className:eo("job-mark"),src:"/gf2/icon/".concat(w[c],".png"),alt:"job",width:"15px"}),(0,n.jsx)("img",{className:eo("avatar"),src:"/gf2/avatar/result/Avatar_Gacha_".concat(c,".png"),alt:"avatar"})]})}),(0,n.jsx)("div",{className:eo("column-item"),style:{animationDelay:s}})]},a)})})]})}var eu=t(3186),em=t.n(eu);let eh=e=>{let{message:a,onSkip:t}=e;return(0,n.jsx)("div",{className:em().app,onClick:()=>{t()},children:(0,n.jsxs)("div",{className:em().container,children:[(0,n.jsx)("div",{className:em().blur_overlay}),(0,n.jsx)("p",{className:em().text,children:a}),(0,n.jsx)("div",{className:em().lines,children:[...Array(12)].map((e,a)=>{let t=(2*Math.random()+2).toFixed(2),c=(1*Math.random()).toFixed(2),s=(.3*Math.random()+.2).toFixed(2);return(0,n.jsx)("div",{className:em().line,style:{animationDuration:"".concat(t,"s"),animationDelay:"".concat(c,"s"),opacity:s}},a)})})]})})};var ep=t(4387),eg=t.n(ep);let ev=s().bind(eg());function ex(e){let{name:a,nextStep:t}=e,{play:c}=ee("UI_Gacha_Show_Char_SSR.wav",{volume:1}),s=(0,l.useRef)(t),i=(0,l.useRef)(c);return s.current=t,i.current=c,(0,l.useEffect)(()=>{let e=setTimeout(()=>{i.current(!0)},1200);return()=>{clearTimeout(e)}},[]),(0,n.jsxs)("div",{className:ev("image-container"),onClick:()=>t(),children:[(0,n.jsx)(J,{onClickSkip:()=>{t()}}),(0,n.jsx)("div",{className:ev("character-text"),children:(0,n.jsxs)("div",{className:ev("job-panel"),children:[(0,n.jsx)("img",{className:ev("job-image"),src:"/gf2/icon/".concat(w[a],".png"),width:"50px"}),(0,n.jsx)("span",{className:ev("job-name"),children:k[a]})]})}),(0,n.jsx)("img",{src:"/gf2/background/Img_Gacha_End.png",alt:"Central Fade",className:ev("fade-in-image")}),(0,n.jsx)("img",{src:"/gf2/avatar/show/Avatar_Gacha_".concat(a,"SSR.png"),className:ev("character-image")})]})}var ej=function(e){return e[e.Message=0]="Message",e[e.Video=1]="Video",e[e.Image=2]="Image",e}(ej||{});let ef=(0,l.memo)(()=>{var e;let{currentResult:a}=p(),t=(0,l.useMemo)(()=>a.map(e=>{let{item:a}=e;return Object.keys(G).includes(a)?{name:a,message:b[a]}:null}).filter(e=>null!==e).filter((e,a,t)=>a===t.findIndex(a=>a.name===e.name)),[a]),c=(0,l.useRef)(0),{message:s,name:i}=null!==(e=t[c.current])&&void 0!==e?e:{},{sound:r,play:d,end:_,isEnded:m}=ee("".concat(i,"_Obtain.wav")),[h,g]=(0,l.useState)(0),v=(0,l.useRef)(null),{setStatus:x}=u();(0,l.useEffect)(()=>{0===h&&d()},[d,h]);let j=()=>{var e;null===(e=v.current)||void 0===e||e.play(),g(1)};return(0,l.useEffect)(()=>{m&&j()},[m]),(0,n.jsxs)(n.Fragment,{children:[0===h&&(0,n.jsx)(eh,{message:s,onSkip:()=>{(null==r?void 0:r.paused)?j():_()}}),2===h&&(0,n.jsx)(ex,{name:i,nextStep:()=>{if(Object.keys(t).length>c.current+1){g(0),c.current=c.current+1;return}x(o.Result)}}),(0,n.jsx)(Y,{autoPlay:!1,ref:v,publicId:"".concat(i,"_Get"),onEnded:()=>{g(2)},onClick:()=>{var e;null===(e=v.current)||void 0===e||e.pause(),g(2)},isShowSkipButton:!0,style:{display:1===h?void 0:"none"}})]})});var eN=t(2110),ey=t.n(eN);let eG=s().bind(ey()),eb={[f.EliteDoll]:3,[f.StandardDoll]:2,[f.StandardWeapon]:2,[f.OldWeapon]:1};function ek(){let{currentResult:e}=p(),a=(0,l.useMemo)(()=>(function(e){switch(e.reduce((e,a)=>Math.max(e,eb[a.type]),0)){case 3:return"SSR";case 2:return"SR";default:return"R"}})(e),[e]),t=(0,l.useRef)(null),c=(0,l.useRef)(null),[s,i]=(0,l.useState)(!1),[r,d]=(0,l.useState)(!1),[_,h]=(0,l.useState)(!0),[g,x]=(0,l.useState)(0),j=(0,l.useRef)(void 0),f=(0,l.useRef)(!1),{play:N,end:y}=ee("helisound.wav",{loop:!0,volume:1}),{play:G}=ee("UI_Gacha_DoorOpen_".concat(a,".wav"),{loop:!1,volume:1}),{play:b}=ee("UI_Gacha_DoorStop_".concat(a,".wav"),{loop:!1,volume:1}),k=(0,l.useRef)(N),{setStatus:w}=u(),{bgmControl:S}=m(),{audioMute:M}=v();k.current=N,(0,l.useEffect)(()=>{let e=t.current;if(!e)return;let a=()=>{var a,t,n,c;e.currentTime>1.4&&(!(null===(a=S.sound)||void 0===a?void 0:a.played)||(null===(t=S.sound)||void 0===t?void 0:t.paused))&&(null==S||null===(n=S.play)||void 0===n||n.call(S)),e.currentTime>10&&(f.current=!0,e.muted=!0,null===(c=k.current)||void 0===c||c.call(k)),e.duration-e.currentTime<=.3&&(e.currentTime=10)};return e.addEventListener("timeupdate",a),()=>e.removeEventListener("timeupdate",a)},[S.sound]);let P=e=>{f.current&&(i(!0),x(e.clientX),c.current&&(c.current.currentTime=0))},R=e=>{if(_&&s&&c.current&&e.clientX-g>0){let e=c.current;G(!0),d(!0),e.play(),h(!1),y(),b();return}};(0,l.useEffect)(()=>()=>{y()},[]);let A=()=>{var e;i(!1),x(0),(null==c?void 0:null===(e=c.current)||void 0===e?void 0:e.currentTime)&&!j.current&&_?j.current=setInterval(()=>{c.current&&c.current.currentTime>.1&&.1*c.current.duration>=c.current.currentTime?c.current.currentTime-=.05:(clearInterval(j.current),j.current=void 0,d(!_))},50):d(!_)};return(0,n.jsxs)("div",{className:eG("video-container"),onMouseDown:P,onMouseMove:R,onMouseUp:A,onPointerDown:P,onPointerMove:R,onPointerUp:A,children:[(0,n.jsx)("button",{className:eG("skip-button"),onClick:()=>{if("SSR"===a){var e,t,n;(!(null===(e=S.sound)||void 0===e?void 0:e.played)||(null===(t=S.sound)||void 0===t?void 0:t.paused))&&(null==S||null===(n=S.play)||void 0===n||n.call(S)),w(o.Show);return}w(o.Result)}}),(0,n.jsx)("video",{className:eG("video-player"),ref:t,autoPlay:!0,controls:!1,muted:M,style:{display:r?"none":"block"},playsInline:!0,"webkit-playsinline":"true",children:(0,n.jsx)("source",{src:"/gf2/video/".concat("SSR"===a?a:"SR","_start.mp4"),type:"video/mp4"})}),(0,n.jsx)("video",{className:eG("video-player"),ref:c,playsInline:!0,"webkit-playsinline":"true",style:{display:r?"block":"none"},muted:M,onEnded:()=>{if("SSR"===a){w(o.Show);return}w(o.Result)},children:(0,n.jsx)("source",{src:"/gf2/video/".concat(a,"_open.mp4"),type:"video/mp4"})})]})}var ew=t(9781),eS=t.n(ew);let eM=s().bind(eS()),eP=e=>{let{progress:a,description:t}=e;return(0,n.jsx)("div",{className:eM("loading-screen"),children:(0,n.jsxs)("div",{className:eM("loading-container"),children:[(0,n.jsxs)("div",{className:eM("floating-info"),children:[(0,n.jsx)("div",{className:eM("progress-decoration"),children:"//. 008254431 256"}),(0,n.jsxs)("div",{className:eM("progress-percentage"),children:[a,"%"]}),(0,n.jsx)("div",{className:eM("progress-text"),children:"리소스 로딩 중"})]}),(0,n.jsx)("div",{className:eM("orange-line-first")}),(0,n.jsx)("div",{className:eM("orange-line-second"),style:{width:"".concat(a/100*69,"%")}}),(0,n.jsx)("div",{className:eM("description"),children:t}),(0,n.jsxs)("div",{className:eM("color-bar"),children:[(0,n.jsx)("div",{className:eM("color-segment","color-red")}),(0,n.jsx)("div",{className:eM("color-segment","color-orange")}),(0,n.jsx)("div",{className:eM("color-segment","color-yellow")})]})]})})},eR=e=>{let{children:a,audioList:t}=e,{setAudioListMap:c}=g(),[s,i]=(0,l.useState)(!0),[r,o]=(0,l.useState)(0),d=0,_=t.length,[u,m]=(0,l.useState)(!1),{audioMute:h}=v();return((0,l.useEffect)(()=>{u&&(async()=>{let e=t.reduce((e,a)=>{let t=new Audio("/gf2/sound/".concat(a));return t.preload="auto",e[a]=t,e},{}),a=Object.entries(e).map(e=>{let[a,t]=e;return new Promise(e=>{t.onloadeddata=()=>{o(Math.round(++d/_*100)),e()},t.onerror=()=>{console.error("".concat(a," failed to load")),e()},t.load()})});await Promise.all(a),c(e),i(!1)})()},[u]),u)?s?(0,n.jsx)(eP,{progress:r>99?99:r,description:"현존 기록에 따르면 '바라고단'이라 불리는 집단은 2066년을 전후하여 출현하였습니다."}):(0,n.jsx)(n.Fragment,{children:a}):(0,n.jsxs)("div",{style:{position:"relative",width:"100%",height:"auto"},children:[(0,n.jsx)(Y,{publicId:"loading_eiplua",loop:!0,muted:h,onClick:()=>{m(!0)}}),(0,n.jsx)("button",{onClick:()=>m(!0),style:{position:"absolute",zIndex:10,top:"85%",color:"white",width:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",fontFamily:"42dot Sans",fontWeight:"700",border:"none",padding:"5px",fontSize:"clamp(0.8rem, 3vw, 1.5em)",left:"0"},children:"시작하기"})]})};var eA=t(9130),eC=t.n(eA);function eI(){let{audioMute:e,setAudioMute:a}=v();return(0,n.jsx)("div",{onClick:()=>a(!e),children:(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"#000000",width:"25px",height:"25px",viewBox:"0 0 24 24",id:"mute-2",transform:"rotate(0)",children:[(0,n.jsx)("g",{id:"SVGRepo_bgCarrier",strokeWidth:"0"}),(0,n.jsx)("g",{id:"SVGRepo_tracerCarrier",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsxs)("g",{id:"SVGRepo_iconCarrier",children:[(0,n.jsx)("path",{id:"primary",d:"M17.45,2.11a1,1,0,0,0-1,.08L9.84,7H6A2,2,0,0,0,4,9v6a2,2,0,0,0,2,2H9.84l6.57,4.81a1,1,0,0,0,1,.08A1,1,0,0,0,18,21V3A1,1,0,0,0,17.45,2.11Z",style:{fill:"white"}}),e&&(0,n.jsx)("path",{id:"secondary",d:"M21.8,4.78a1,1,0,0,0-1.39-.22l-18,13.26A1,1,0,0,0,3,19.63a.94.94,0,0,0,.59-.2l18-13.26A1,1,0,0,0,21.8,4.78Z",style:{fill:"red"}})]})]})})}let eH=s().bind(eC()),eE=[...["SSR","SR","R"].map(e=>["UI_Gacha_DoorOpen_".concat(e,".wav"),"UI_Gacha_DoorStop_".concat(e,".wav"),"UI_Gacha_Show_Char_".concat(e,".wav"),"UI_Gacha_Show_Result_".concat(e,".wav")]),...Object.keys(G).map(e=>["".concat(e,"_Obtain.wav")]),"helisound.wav","BGM_Gacha (BGM_Gacha).wav","BGM_ShopGacha.wav","UI_System_Main_Click_Normal.wav"].flatMap(e=>e),eD=Object.keys(y);function eU(){let{status:e,setStatus:a}=u(),t=ee("BGM_Gacha (BGM_Gacha).wav",{loop:!0,volume:.4}),{sound:c,play:s,end:i}=ee("BGM_ShopGacha.wav",{loop:!0,volume:.4}),{setBgmControl:r}=m(),[d,_]=(0,l.useState)(eD[0]);return(0,l.useEffect)(()=>{r(t)},[t,r]),(0,l.useEffect)(()=>{c&&([o.Home,o.None].includes(e)?(null==c?void 0:c.paused)&&s():i(),e===o.None&&a(o.Home))},[c,e]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:eH("gatcha-page-header"),children:["소전2 발주전략실",(0,n.jsx)(eI,{})]}),(0,n.jsx)(eR,{audioList:eE,children:(0,n.jsxs)("div",{className:eH("gatcha-page-container"),children:[(0,n.jsxs)("div",{className:eH("gatcha-container"),children:[e===o.Home&&(0,n.jsx)(el,{pickUpName:d,setPickUpName:_}),e===o.Start&&(0,n.jsx)(ek,{}),e===o.Show&&(0,n.jsx)(ef,{}),e===o.Result&&(0,n.jsx)(e_,{})]}),(0,n.jsx)("div",{className:eH("banner-container"),children:(0,n.jsx)(en,{pickUpName:d,setPickUpName:_})}),(0,n.jsx)(I,{pickUpName:d})]})})]})}},9130:e=>{e.exports={"gatcha-page-header":"GatchaPage_gatcha-page-header__pKbei","gatcha-page-container":"GatchaPage_gatcha-page-container__wuH5r","gatcha-container":"GatchaPage_gatcha-container__djVV5","icon-list":"GatchaPage_icon-list__qIHNZ","banner-container":"GatchaPage_banner-container__iikmu","gatcha-banner":"GatchaPage_gatcha-banner__yAHJw",selected:"GatchaPage_selected__SctVz"}},8072:e=>{e.exports={page:"page_page__ZU32B",main:"page_main__GlU4n"}},5792:e=>{e.exports={"rules-panel":"AccessPanel_rules-panel__e1P84",header:"AccessPanel_header__RVHf_","header-title":"AccessPanel_header-title__sW0_8","header-close-button":"AccessPanel_header-close-button__Po7q8","main-container":"AccessPanel_main-container__9WEJ6",sidebar:"AccessPanel_sidebar__WTnOc","nav-button":"AccessPanel_nav-button___yHKC",active:"AccessPanel_active__r8jq7",content:"AccessPanel_content__891Gv","content-title":"AccessPanel_content-title__7QwOO","content-body":"AccessPanel_content-body__G71zD",highlight:"AccessPanel_highlight__b2lN3","card-title":"AccessPanel_card-title___yar0","card-list":"AccessPanel_card-list__h8viX","row-group":"AccessPanel_row-group___kaPC","card-content":"AccessPanel_card-content__4I3rH","card-image":"AccessPanel_card-image__MqQaQ",weapon:"AccessPanel_weapon__LYeic","card-name":"AccessPanel_card-name__6miWF",golden:"AccessPanel_golden__rDt4G","card-deco":"AccessPanel_card-deco__3PQUD",purple:"AccessPanel_purple___4559",blue:"AccessPanel_blue__XgW_M","card-count":"AccessPanel_card-count__n_zQO","no-data":"AccessPanel_no-data__m1Wwl"}},6891:e=>{e.exports={cloudinary_wrapper:"CloudinaryVideo_cloudinary_wrapper__6664h",cloudinary_video:"CloudinaryVideo_cloudinary_video__a7Zsq"}},3186:e=>{e.exports={app:"GatchMessage_app__lxfdf",container:"GatchMessage_container__4HxG7","fade-in":"GatchMessage_fade-in__mBmUU",text:"GatchMessage_text__XdHVV",blur_overlay:"GatchMessage_blur_overlay__UTrx2",lines:"GatchMessage_lines__mxuPJ",line:"GatchMessage_line__EVBoB","move-line":"GatchMessage_move-line__ooywF","fade-line":"GatchMessage_fade-line__vnJ77","blur-overlay":"GatchMessage_blur-overlay__esdow"}},3372:e=>{e.exports={"gatcha-banner-image":"GatchaBanner_gatcha-banner-image__rCY91","gatcha-banner":"GatchaBanner_gatcha-banner__tksaY",selected:"GatchaBanner_selected__lAzJI",changeAnimation:"GatchaBanner_changeAnimation__w5BSU"}},6371:e=>{e.exports={"glitch-container":"GatchaGlitch_glitch-container__N_2iR","opacity-effect":"GatchaGlitch_opacity-effect__MO83S","glitch-slice":"GatchaGlitch_glitch-slice__A7x_a","glitch-slice-small":"GatchaGlitch_glitch-slice-small__8UqRp","glitch-slice-message":"GatchaGlitch_glitch-slice-message__4jdtG",right:"GatchaGlitch_right__cwi4H",left:"GatchaGlitch_left___r6EV","slice-top":"GatchaGlitch_slice-top__am3hJ","slice-middle":"GatchaGlitch_slice-middle__l7UHd","slice-bottom":"GatchaGlitch_slice-bottom__n2YSB","glitch-effect":"GatchaGlitch_glitch-effect__RtQ2q",revealAnimation:"GatchaGlitch_revealAnimation__ExhN7"}},4081:e=>{e.exports={"home-container":"GatchaHome_home-container__JTwVX",container:"GatchaHome_container__Q_Ngx","remain-ticket":"GatchaHome_remain-ticket__L81az","remain-ticket-count":"GatchaHome_remain-ticket-count__W4UlM",button_container:"GatchaHome_button_container__Ju2a6",button_box:"GatchaHome_button_box__AZrfT",button:"GatchaHome_button__OW199",one_access:"GatchaHome_one_access___kWTU",ten_access:"GatchaHome_ten_access__Ra3_y","ticket-container":"GatchaHome_ticket-container__X3nWR","ticket-image":"GatchaHome_ticket-image__xMP0Z","ticket-text":"GatchaHome_ticket-text__j6tDj","ticket-text-parts":"GatchaHome_ticket-text-parts__3vLYz","pickup-info":"GatchaHome_pickup-info__nvmR0","job-panel":"GatchaHome_job-panel__aZE2X",showAnimation:"GatchaHome_showAnimation__uSgWE","job-img":"GatchaHome_job-img__JN8US","pickup-list":"GatchaHome_pickup-list__Z5ECd","pickup-date":"GatchaHome_pickup-date__CssBZ","pickup-date-text":"GatchaHome_pickup-date-text__RezyU","pickup-count":"GatchaHome_pickup-count__4ifYx","pickup-count-text":"GatchaHome_pickup-count-text__60zAo",revealAnimation2:"GatchaHome_revealAnimation2__uzWWq","animation-wrapper":"GatchaHome_animation-wrapper__5zMWG",revealAnimation:"GatchaHome_revealAnimation__0bitX"}},4387:e=>{e.exports={root:"GatchaImage_root__fk_pX","column-container":"GatchaImage_column-container__wuOYQ","blue-column":"GatchaImage_blue-column__nOyQ_","purple-column":"GatchaImage_purple-column__ht_hg","golden-column":"GatchaImage_golden-column__xPXyZ",drop:"GatchaImage_drop__nFdTN",shrink:"GatchaImage_shrink__SZA40","image-container":"GatchaImage_image-container__Zods_","fade-in-image":"GatchaImage_fade-in-image__Xg9AV",dynamicFadeIn:"GatchaImage_dynamicFadeIn__1vHkc","character-image":"GatchaImage_character-image__7q76i",revealCharacter:"GatchaImage_revealCharacter__DnzT7","character-text":"GatchaImage_character-text__Y3BSU",fadeInText:"GatchaImage_fadeInText__zAEA2","job-panel":"GatchaImage_job-panel__3kFve","job-image":"GatchaImage_job-image__tnbEc","job-name":"GatchaImage_job-name__HMsuK"}},6455:e=>{e.exports={"gatcha-result":"GatchaResult_gatcha-result__lHdu1","column-container":"GatchaResult_column-container__X9TVn",column:"GatchaResult_column__nyZN4",drop:"GatchaResult_drop___sl7r","column-item":"GatchaResult_column-item__NU3ei",shrink:"GatchaResult_shrink__zzTTF",blue:"GatchaResult_blue__Gjbjv",purple:"GatchaResult_purple__lHDaC",golden:"GatchaResult_golden__0kPqm","avatar-container":"GatchaResult_avatar-container__oU0t1",avatar:"GatchaResult_avatar__6dmzH",weapon:"GatchaResult_weapon__9Nojr","x-icon":"GatchaResult_x-icon__NkYts","x-icon-container":"GatchaResult_x-icon-container__I7EPS","job-mark":"GatchaResult_job-mark__c3sYl"}},2110:e=>{e.exports={"video-container":"GatchaStart_video-container__HFBqr","video-player":"GatchaStart_video-player__J1a17","skip-button":"GatchaStart_skip-button__MMK51"}},9781:e=>{e.exports={"loading-screen":"LoadingView_loading-screen__FSSZF","loading-container":"LoadingView_loading-container__Zznkm","floating-info":"LoadingView_floating-info__HL4Bx","progress-decoration":"LoadingView_progress-decoration__owpfl","progress-percentage":"LoadingView_progress-percentage__iCtch","progress-text":"LoadingView_progress-text__JCMwZ","orange-line-first":"LoadingView_orange-line-first__DJ6Sp","orange-line-second":"LoadingView_orange-line-second__G7Ovq",description:"LoadingView_description__JDRtH","color-bar":"LoadingView_color-bar__ufLUS","color-segment":"LoadingView_color-segment__GjcfU","color-red":"LoadingView_color-red__CbALG","color-orange":"LoadingView_color-orange__WsKaQ","color-yellow":"LoadingView_color-yellow___lUd7"}}},e=>{var a=a=>e(e.s=a);e.O(0,[449,366,721,59,358],()=>a(8088)),_N_E=e.O()}]);